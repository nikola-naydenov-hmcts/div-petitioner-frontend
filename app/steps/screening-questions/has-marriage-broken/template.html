{% from "common/components/formElements.html" import yesNoRadioHeading %}
{% from "radios/macro.njk" import govukRadios %}
{% from "input/macro.njk" import govukInput %}
{% extends "question.html" %}
{% block cookie_message %}
    <p>
        {{ content.cookie | safe }}
        <a href="/cookie" target="_blank">{{ content.cookieLink | safe }}</a>
    </p>
{% endblock %}

{% block question %}
    {{ content.question | safe }}
{% endblock %}


{% block form %}
    {% set emailHtml %}
        {{ govukInput({
            id: "contact-by-email",
            name: "contact-by-email",
            type: "email",
            classes: "govuk-!-width-one-third",
            label: {
                text: "Email address"
            },
            attributes: {
                spellcheck: "false"
            }
        }) }}
    {% endset -%}

    {% set phoneHtml %}
        {{ govukInput({
            id: "contact-by-phone",
            name: "contact-by-phone",
            type: "tel",
            classes: "govuk-!-width-one-third",
            label: {
                text: "Phone number"
            }
        }) }}
    {% endset -%}

    {% set textHtml %}
        {{ govukInput({
            id: "contact-by-text",
            name: "contact-by-text",
            type: "tel",
            classes: "govuk-!-width-one-third",
            label: {
                text: "Mobile phone number"
            }
        }) }}
    {% endset -%}

    {{ govukRadios({
        idPrefix: "how-contacted-conditional",
        name: "how-contacted",
        fieldset: {
            legend: {
                text: "How would you prefer to be contacted?",
                isPageHeading: true,
                classes: "govuk-fieldset__legend--xl"
            }
        },
        hint: {
            text: "Select one option."
        },
        items: [
            {
                value: "email",
                text: "Email",
                conditional: {
                html: emailHtml
            }
            },
            {
                value: "phone",
                text: "Phone",
                conditional: {
                html: phoneHtml
            }
            },
            {
                value: "text",
                text: "Text message",
                conditional: {
                html: textHtml
            }
            }
        ]
    }) }}
    

{% endblock %}

{% block saveAndClose %}{% endblock %}

{#  OLD MARKUP
{% block form %}

    <p class="text"> {{content.line1 | safe }}</p>

    <fieldset class="form-group inline">
        <legend class="visually-hidden">{{ content.question | safe }}</legend>
        {{ yesNoRadioHeading(
            legend = content.question,
            name = 'screenHasMarriageBroken',
            field = fields.screenHasMarriageBroken,
            yes = content.yes,
            no = content.no,
            targetYes = '',
            targetNo = 'marriage-broken-down-no',
            screenReader = content.question
        ) }}

        <div class="panel panel-border-narrow js-hidden" id="marriage-broken-down-no">
            <div class="notice">
                <em class="icon icon-important">
                    <span class="visuallyhidden">Warning</span>
                </em>
                <p class="normal-small"><br>{{ content.marriageBrokenDownNo | safe }}<br></p>
            </div>
        </div>
    </fieldset>

{% endblock %}
#}